# API 在线测试页面重构

## 新版本特点

### 1. 专业的请求配置界面
- **一体化URL配置**: HTTP方法 + Base URL + Path 在同一行，更加直观
- **折叠式配置区域**: 使用 Collapse 组件组织不同配置项，界面更整洁
- **实时计数显示**: 每个配置区域显示已启用项目数量
- **开关控制**: 每个参数和请求头都有独立的启用/禁用开关

### 2. 强化的请求配置功能
- **Query参数管理**: 支持添加、编辑、删除和启用/禁用
- **请求头管理**: 灵活的请求头配置，支持从API定义预填充
- **多格式请求体**: 支持JSON、XML、Text、Form Data等格式
- **认证配置**: 支持Bearer Token、Basic Auth、API Key等认证方式
- **高级设置**: 超时时间、重试次数、重定向控制等

### 3. 智能化辅助功能
- **JSON格式化**: 一键格式化JSON请求体
- **快速填充**: 支持使用示例数据、导入cURL、Postman导入等
- **保存和历史**: 支持保存请求配置和查看历史记录

### 4. 专业的响应展示
- **响应概览**: 直观显示状态码、响应时间、大小、请求时间
- **性能分析**: 详细的请求时间分解（DNS、TCP、响应、下载）
- **多维度响应查看**: 
  - 响应体：格式化显示，支持复制和下载
  - 响应头：表格形式展示，支持单独复制
  - 测试断言：自动验证和JSON路径检查
  - 原始响应：完整的HTTP响应信息

### 5. 用户体验优化
- **响应式布局**: 适配不同屏幕尺寸
- **等宽字体**: 代码和数据使用专业的等宽字体
- **状态色彩**: 根据HTTP状态码显示不同颜色
- **一键操作**: 复制、格式化、下载等常用操作
- **实时反馈**: 操作成功/失败的即时提示

## 界面结构

```
在线测试页面
├── 请求配置卡片
│   ├── URL配置区域 (HTTP方法 + Base URL + Path + 发送按钮)
│   └── 折叠配置区域
│       ├── Query参数 (带计数)
│       ├── 请求头 (带计数)
│       ├── 请求体 (多格式支持)
│       ├── 认证配置
│       └── 高级设置
├── 快速填充工具栏
└── 响应结果卡片
    ├── 响应概览 (状态码、时间、大小等)
    ├── 性能分析图表
    └── 响应详情标签页
        ├── 响应体
        ├── 响应头
        ├── 测试断言
        └── 原始响应
```

## 技术特点

### 1. 状态管理
- 使用 React Hooks 管理复杂的表单状态
- 支持动态添加/删除配置项
- 实时更新计数和状态

### 2. 数据处理
- JSON 自动格式化和验证
- HTTP 响应数据解析
- 文件大小格式化
- 时间统计分析

### 3. 交互设计
- 键盘快捷键支持
- 拖拽排序（可扩展）
- 批量操作
- 撤销/重做（可扩展）

### 4. 扩展性
- 插件化认证方式
- 自定义断言规则
- 导入/导出配置
- 测试脚本执行

## 对比旧版本的改进

| 功能 | 旧版本 | 新版本 |
|------|--------|--------|
| 界面组织 | 平铺展示 | 折叠式分组 |
| 参数管理 | 基础输入 | 开关控制+动态管理 |
| 请求体编辑 | 简单文本框 | 多格式+格式化 |
| 响应展示 | 基础信息 | 多维度详细分析 |
| 性能分析 | 无 | 详细时间分解 |
| 用户交互 | 基础功能 | 丰富的辅助工具 |
| 专业性 | 一般 | 类似Postman的专业体验 |

## 使用场景

1. **API开发调试**: 快速测试API接口功能
2. **接口文档验证**: 验证文档中的示例是否正确
3. **性能测试**: 分析接口响应时间
4. **集成测试**: 验证API在不同参数下的表现
5. **问题诊断**: 通过详细的响应信息定位问题

这个新版本的在线测试页面提供了更加专业和实用的API测试体验，大大提升了开发者的工作效率。