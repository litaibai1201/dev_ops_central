# 测试数据配置 - groupuser 测试账号

## 概述

为了方便测试创建专案功能，我添加了一个专用的测试账号 `groupuser`，该账号被设置为"测试开发组"的群主，可以用来测试创建专案的完整流程。

## 测试账号信息

### 🧪 **新增测试账号**

**用户名:** `groupuser`  
**密码:** 任意（登录页面显示"密码随意"）  
**角色:** 普通用户 (`user`)  
**用户ID:** `10`  
**群主身份:** 是（拥有"测试开发组"的群主权限）

### 📋 **完整测试账号列表**

| 用户名 | 角色 | 用户ID | 权限描述 | 测试用途 |
|--------|------|--------|----------|----------|
| `admin` | 系统管理员 | 1 | 系统最高权限 | 测试管理功能 |
| `groupuser` | 普通用户 | 10 | 测试开发组群主 | **测试创建专案功能** |
| `user` | 普通用户 | 1 | 普通权限 | 测试基础功能 |

## 测试群组配置

### 🏢 **测试开发组详情**

```typescript
{
  id: '10',
  name: '测试开发组',
  description: '用于测试创建专案功能的群组',
  ownerId: '10', // groupuser的ID
  owner: groupuser,
  members: [],
  projectCount: 0, // 初始没有专案
  createdAt: '2024-01-01',
  updatedAt: '2024-01-01'
}
```

### 🎯 **测试数据特点**

1. **专属群组**: `groupuser` 拥有专门的测试群组
2. **干净环境**: 初始专案数为0，便于测试
3. **完整权限**: 作为群主拥有创建专案的完整权限
4. **隔离测试**: 与其他测试账号的数据完全隔离

## 修改的文件

### 1. 登录页面 (`AuthPage.tsx`)

**修改内容:**
- 新增 `groupuser` 账号的登录逻辑
- 为 `groupuser` 分配专用的用户ID `10`
- 更新测试账号说明文本

**代码变更:**
```typescript
// 用户ID分配
id: values.username === 'groupuser' ? '10' : '1',

// 测试账号说明
<p>管理员: admin / 群主: groupuser / 普通用户: user</p>
```

### 2. Dashboard页面 (`DashboardPage.tsx`)

**修改内容:**
- 在 `fetchUserGroups` 函数中为 `groupuser` 添加专属群组
- 确保其他用户不会看到这个测试群组
- 正确设置群主权限

**关键逻辑:**
```typescript
// 为groupuser添加测试群组
if (user.username === 'groupuser') {
  mockGroups.push({
    id: '10',
    name: '测试开发组',
    description: '用于测试创建专案功能的群组',
    ownerId: user.id, // groupuser作为群主
    // ...其他配置
  });
}
```

### 3. 创建专案页面 (`CreateProjectPage.tsx`)

**修改内容:**
- 同步更新群组获取逻辑
- 确保 `groupuser` 能看到正确的群组选项
- 自动选择逻辑（因为只有一个群组）

## 测试流程

### 🚀 **完整测试步骤**

1. **登录测试账号**
   ```
   用户名: groupuser
   密码: 任意
   ```

2. **验证群主身份**
   - 登录后进入 Dashboard
   - 检查快捷操作区域
   - 应该看到"✓ 您是 1 个群组的群主"
   - "创建专案"按钮应该是可用状态

3. **测试创建专案功能**
   - 点击"创建专案"按钮
   - 跳转到 `/projects/create` 页面
   - 群组选择应该自动选中"测试开发组"
   - 项目负责人默认包含 `groupuser`（群主）

4. **填写专案信息**
   - 专案名称: 输入测试名称
   - 专案描述: 输入测试描述
   - 版本号: 默认 v1.0.0
   - 可见性: 可选择公开/私有

5. **配置项目负责人**
   - 默认已包含群主 `groupuser`
   - 可以添加其他群组成员（模拟数据）
   - 可以通过工号添加外部成员

6. **提交创建**
   - 点击"创建专案"按钮
   - 等待模拟API调用完成
   - 应该看到成功提示
   - 自动跳转回 Dashboard

## 验证要点

### ✅ **功能验证清单**

- [ ] `groupuser` 能成功登录
- [ ] Dashboard 显示正确的群主状态
- [ ] "创建专案"按钮可点击
- [ ] 创建专案页面正确显示"测试开发组"
- [ ] 群组自动选中且不可更改（只有一个群组）
- [ ] 项目负责人默认包含群主
- [ ] 表单验证正常工作
- [ ] 提交流程完整无错误

### 🔍 **权限验证**

1. **Dashboard权限检查**
   ```typescript
   // 应该显示
   stats.ownedGroups = 1
   ownedGroups.length > 0 = true
   
   // 状态显示
   "✓ 您是 1 个群组的群主"
   "群组：测试开发组"
   ```

2. **创建专案权限**
   ```typescript
   // 群组列表应该包含
   ownedGroups = [
     {
       id: '10',
       name: '测试开发组',
       ownerId: '10' // groupuser的ID
     }
   ]
   ```

## 后续扩展

### 📈 **可选的测试数据扩展**

1. **添加群组成员**
   - 为测试群组添加模拟成员
   - 测试项目负责人选择功能

2. **创建测试专案**
   - 预设一些测试专案数据
   - 验证专案列表显示

3. **权限场景测试**
   - 测试不同角色的权限边界
   - 验证权限控制逻辑

这个测试配置为创建专案功能提供了完整的测试环境，可以验证从权限检查到专案创建的整个流程。